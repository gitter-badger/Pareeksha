if(typeof(meteor)==="undefined"||meteor===null){var monitor_info,monitor_url,key,monitor_jsonp;if(typeof console!=="undefined"&&console.log){console.log("Dependency error. Please make sure metsol.js is loaded and track() has been called.")}monitor_info={useragent:navigator.userAgent,location:document.location,message:"metshare.js was loaded without metsol.js"};monitor_url=[];for(key in monitor_info){if(monitor_info.hasOwnProperty(key)){monitor_url.push(key+"="+encodeURIComponent(monitor_info[key]))}}monitor_url="?"+monitor_url.join("&");monitor_jsonp=document.createElement("script");monitor_jsonp.setAttribute("type","text/javascript");monitor_jsonp.setAttribute("src","http://cdnt.meteorsolutions.com/api/client_error"+monitor_url);document.getElementsByTagName("head")[0].appendChild(monitor_jsonp)}else{if(meteor.missing(meteor.sharing.superbar)){meteor.sharing.superbar={};meteor.sharing.superbar.fb_appid="114189562003069";meteor.sharing.superbar.default_settings={node:null,parentID:null,id:1,size:"med",sites:[],orientation:"horizontal",url:window.location.href,application_id:meteor.tracking.settings.cookie_name,message:"",title:""};meteor.sharing.superbar.settings={};meteor.sharing.superbar.sizes={small:16,med:24,large:32};meteor.sharing.superbar.sites={delicious:{params:["url","title"],url:"http://del.icio.us/post?v=4;url=$url;title=$title",make_mobile:function(a){return a},width:"960",height:"500",offset:0,readable_name:"on Delicious"},digg:{url:"http://digg.com/submit?url=$url&title=$title",make_mobile:function(a){return a},params:["url","title"],width:"1070",height:"500",offset:-1,readable_name:"on Digg"},email:{url:"mailto:?subject=$title&body=$message%20$url",make_mobile:function(a){return a},params:["url","title","message"],width:"500",height:"500",offset:-2,readable_name:"via Email"},facebook:{url:"http://www.facebook.com/dialog/feed?app_id="+meteor.sharing.superbar.fb_appid+"&link=$url&picture=http://cdnt.meteorsolutions.com/api/null&name=$title&description=$message&redirect_uri=http://www.facebook.com",make_mobile:function(a){return a.replace(/^http:\/\/www.facebook.com/,"http://m.facebook.com")+"&display=touch"},params:["url","title","message"],width:"1050",height:"500",offset:-3,readable_name:"on Facebook"},linkedin:{url:"http://www.linkedin.com/shareArticle?mini=true&url=$url&title=$message&summary=&source=",make_mobile:function(a){return a},params:["url","message"],width:"500",height:"500",offset:-4,readable_name:"on LinkedIn"},live:{url:"http://profile.live.com/badge/?url=$url&title=$title&description=$message",make_mobile:function(a){return a},params:["url","title","message"],width:"1015",height:"500",offset:-5,readable_name:"on Windows Live Favorites"},reddit:{url:"http://reddit.com/submit?url=$url&title=$title",make_mobile:function(a){return a},params:["url","title"],width:"875",height:"500",offset:-6,readable_name:"on reddit"},twitter:{url:"http://twitter.com/intent/tweet?text=$message+$url",make_mobile:function(a){return a},params:["url","message"],width:"750",height:"400",offset:-7,readable_name:"on Twitter"}};meteor.sharing.superbar.init=function(d,c){if(meteor.tracking.is_completed){var g,e,f,a,b;f=meteor.random_id(4);a=document.getElementsByTagName("script");b=a[a.length-1];d.node=document.createElement("div");d.node.id=f;d.node.className="meteor_share_"+d.id;d.node.style.position="relative";b.parentNode.insertBefore(d.node,b.nextSibling);meteor.sharing.superbar.configure(d,f,function(h){meteor.sharing.superbar.reinit(h)})}else{if(typeof c==="undefined"){c=0}if(c<=5){meteor.log("Dependency error: Meteor tracking is required for sharing to work properly. If you see this message multiple times, make sure that track() is being called called before superbar init.");setTimeout(function(){meteor.sharing.superbar.init(d,++c)},500)}}};meteor.sharing.superbar.reinit=function(b){var f,c,h,j,k,d;var a,e,g;f=b.bar_id;b=b.config;c=meteor.sharing.superbar.settings[f];for(d in b){if(b.hasOwnProperty(d)){if(d==="sites"){if(c[d].length===0){c[d]=b[d]}}else{if(c[d]===meteor.sharing.superbar.default_settings[d]){c[d]=b[d]}}}}if(meteor.sharing.superbar.settings[f].parentID){parent=document.getElementById(meteor.sharing.superbar.settings[f].parentID);parent.appendChild(c.node)}c.margin=meteor.sharing.superbar.sizes[c.size]/8;c.button_width=(meteor.sharing.superbar.sizes[c.size]+c.margin*2);meteor.sharing.superbar.settings[f]=c;if(c.orientation==="vertical"){c.node.style.width=c.button_width.toString()+"px"}else{c.node.style.width=(c.button_width*c.sites.length).toString()+"px"}switch(c.size){case"small":h="superplate_small.gif";break;case"med":h="superplate_med.gif";break;case"large":h="superplate_large.gif";break;default:h="superplate_med.gif"}j=meteor.construct_url("static",h);k=function(i,m,l){return function(){meteor.sharing.superbar.href(i,m.title,m.message,l)}};for(d=0;d<c.sites.length;d++){a=c.sites[d];e=document.createElement("img");e.src=meteor.construct_url("static","none.gif");e.title="Share "+meteor.sharing.superbar.sites[a].readable_name;e.onclick=k(a,c,f);e.id=f+"_"+a;e.style.cursor="pointer";g=meteor.sharing.superbar.coords(a,c.size);e.style.width=g[1][0];e.style.height=g[1][1];e.style.backgroundImage='url("'+j+'")';e.style.backgroundRepeat="no-repeat";e.style.backgroundPosition=g[0][0]+" "+g[0][1];e.style.margin=c.margin.toString()+"px";if(c.orientation==="vertical"){e.style.display="block"}c.node.appendChild(e)}};meteor.sharing.superbar.draw_mobile=function(f,e){var d,b,a,h,c,g;switch(f.size){case"small":d=16;break;case"med":d=24;break;case"large":d=32;break;default:d=24}a="openshare-";if(f.sites.length>=3){if(f.orientation==="vertical"){b=[d,d*3]}else{b=[d*3,d]}}else{b=[d,d]}a+=b[0].toString()+"x"+b[1].toString()+".gif";c=document.createElement("img");c.src=meteor.construct_url("static",a);c.title="Share";c.id=e+"_mobile";c.onclick=function(){window.open(meteor.construct_url("sharing","api/mobile_share_redirect?application_id="+f.application_id+"&title="+f.title+"&message="+f.message+"&site_urls="+encodeURIComponent(meteor.json_encode(f.site_urls))+"&sites="+meteor.json_encode(f.sites)))};c.style.cursor="pointer";c.style.width=b[0].toString()+"px";c.style.height=b[1].toString()+"px";c.style.margin=f.margin.toString()+"px";if(f.orientation==="vertical"){c.style.display="block";if(f.sites.length===3){h=f.margin.toString()+"px"}else{if(f.sites.length>3){h=((f.button_width*(f.sites.length-3))+f.margin).toString()+"px"}else{h=((f.button_width*(f.sites.length-1))+f.margin).toString()+"px"}}c.style.marginBottom=h}else{if(f.sites.length===3){h=f.margin.toString()+"px"}else{if(f.sites.length>3){h=(((f.button_width*(f.sites.length-3))/2)+f.margin).toString()+"px"}else{h=(((f.button_width*(f.sites.length-1))/2)+f.margin).toString()+"px"}}c.style.marginLeft=h;c.style.marginRight=h}f.node.appendChild(c)};meteor.sharing.superbar.configure=function(a,g,h){var c,b,d,f;g=g?g:"master";c=function(i){meteor.sharing.superbar.reconfigure(i)};h=h?h:c;if(meteor.missing(a)){a={}}b=meteor.clone(meteor.sharing.superbar.default_settings);for(d in a){if(a.hasOwnProperty(d)){b[d]=a[d]}}if(b.title===""){b.title=document.title?document.title:""}if(b.message===""){var j,e;j="";e=document.getElementsByTagName("meta");for(d=0;d<e.length;d++){if(e[d].name==="description"){j=e[d].content}}b.message=j}if(!b.hasOwnProperty("url_storage_source")){b.url_storage_source=meteor.tracking.settings.url_storage_source}meteor.sharing.superbar.settings[g]=b;f={application_id:b.application_id,fbid:meteor.tracking.get_permanent_storage(b.application_id).id,id:b.id,bar_id:g,url:b.url,url_storage_source:b.url_storage_source};meteor.json_query(meteor.construct_url("sharing","api/sharetool_config"),f,h)};meteor.sharing.superbar.reconfigure=function(a){var c,b;c=a.bar_id;a=a.config;for(b in a){if(a.hasOwnProperty(b)){meteor.sharing.superbar.settings[c][b]=a[b]}}};meteor.sharing.superbar.href=function(a,d,c,b){meteor.sharing.superbar.trigger(a,{title:d,message:c,bar_id:b})};meteor.sharing.superbar.trigger=function(b,e){var g,f,a,d,c,j;var h,i,k;h=e.bar_id?e.bar_id:"master";g=meteor.sharing.superbar.settings[h];i=e.title?e.title:g.title;k=e.message?e.message:g.message;a=meteor.sharing.superbar.sites[b];f=a.url;if(meteor.array.contains(a.params,"url")){f=f.replace("$url",encodeURIComponent(g.site_urls[b]))}if(meteor.array.contains(a.params,"title")){f=f.replace("$title",encodeURIComponent(i))}if(meteor.array.contains(a.params,"message")){f=f.replace("$message",encodeURIComponent(k))}d={url:meteor.meteor_escape(g.url),application_id:g.application_id,site_id:b,pixel:true};setTimeout(function(){meteor.json_query(meteor.construct_url("sharing","api/record_click"),d,function(){})},1000);setTimeout(function(){meteor.sharing.superbar.persist_share(g,b)},100);if(b==="email"){window.location.href=f}else{meteor.sharing.superbar.open(f,a)}};meteor.sharing.superbar.share=function(i){var c,d,e,a,g,b;var j,h,f;i=i||window.event;c=i.target||i.srcElement;d=c.className.split("_");e=d[0];a=d[1];g=c.id.split("_");b=g[0]+"_message";j=document.getElementById(b).value.replace(/^\s+|\s+$/g,"");h=g[0]+"_usertitle";f=document.getElementById(h).value.replace(/^\s+|\s+$/g,"");meteor.sharing.superbar.href(a,f,j,e)};meteor.sharing.superbar.open=function(b,a){if(meteor.sharing.superbar.is_smartphone(navigator.userAgent)){window.open(a.make_mobile(b))}else{window.open(b,"","height="+a.height+",width="+a.width+",toolbar=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no")}};meteor.sharing.superbar.button_hover=function(a){var b;a=a||window.event;b=a.target||a.srcElement;b.style.color="#006881";b.style.backgroundColor="#DFF4FF"};meteor.sharing.superbar.button_nohover=function(a){var b;a=a||window.event;b=a.target||a.srcElement;b.style.color="#000000";b.style.backgroundColor="#F2F2F2"};meteor.sharing.superbar.coords=function(c,d){var f,b,g,e,a;f=meteor.sharing.superbar.sizes[d];b=(meteor.sharing.superbar.sites[c].offset*f).toString()+"px";g="0px";e=f.toString()+"px";a=f.toString()+"px";return[[b,g],[e,a]]};meteor.sharing.superbar.is_smartphone=function(a){a=a.toLowerCase();if(a.search("iphone")>-1){return true}else{if(a.search("ipod")>-1){return true}else{if(a.search("android")>-1&&a.search("webkit")>-1){return true}else{if(a.search("webos")>-1){return true}}}}return false};meteor.sharing.superbar.persist_share=function(d,b){var a,c;if(!meteor.missing(d.persist_urls)&&!meteor.missing(d.persist_urls[b])){a=document.createElement("img");a.src=d.persist_urls[b];c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}};meteor.sharing.superbar.mobile={};meteor.sharing.superbar.mobile.init=function(b){var f,e,d,c,a;e=meteor.sharing.superbar.settings.master;f=meteor.sharing.superbar.sites[b];d=$("#inputs-"+b);a=$("#toshare-"+b);for(c=0;c<f.params.length;c++){a.html(e.site_urls[b]);if(f.params[c]==="title"){d.append($("<input>",{type:"text","class":"share-box",value:e.title,id:"sharetitle-"+b}))}if(f.params[c]==="message"){d.append($("<textarea>",{"class":"share-box",id:"sharemessage-"+b}).html(e.message))}}};meteor.sharing.superbar.mobile.share=function(a){var b,c;c=$("#sharetitle-"+a).val();b=$("#sharemessage-"+a).val();meteor.sharing.superbar.href(a,c,b,"master")}}};